(function(t){function e(e){for(var a,i,n=e[0],l=e[1],c=e[2],u=0,p=[];u<n.length;u++)i=n[u],s[i]&&p.push(s[i][0]),s[i]=0;for(a in l)Object.prototype.hasOwnProperty.call(l,a)&&(t[a]=l[a]);d&&d(e);while(p.length)p.shift()();return r.push.apply(r,c||[]),o()}function o(){for(var t,e=0;e<r.length;e++){for(var o=r[e],a=!0,n=1;n<o.length;n++){var l=o[n];0!==s[l]&&(a=!1)}a&&(r.splice(e--,1),t=i(i.s=o[0]))}return t}var a={},s={app:0},r=[];function i(e){if(a[e])return a[e].exports;var o=a[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=t,i.c=a,i.d=function(t,e,o){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(o,a,function(e){return t[e]}.bind(null,a));return o},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/shouyin/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var d=l;r.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";var a=o("64a9"),s=o.n(a);s.a},1153:function(t,e,o){},"319a":function(t,e,o){},"388d":function(t,e,o){},4678:function(t,e,o){var a={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function s(t){var e=r(t);return o(e)}function r(t){var e=a[t];if(!(e+1)){var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}return e}s.keys=function(){return Object.keys(a)},s.resolve=r,t.exports=s,s.id="4678"},"4cca":function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("cadf"),o("551c"),o("097d");var a,s=o("2b0e"),r=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{class:t.$route.meta.top?"app":"print"},[o("el-container",{staticStyle:{flex:"1"}},[t.$route.meta.top?o("el-header",[o("el-row",[o("el-col",{attrs:{span:6}},[o("div",{staticClass:"logo"},[t._v(t._s(t.appName))])]),o("el-col",{attrs:{span:12}},[o("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":t.activeIndex,"background-color":"#409EFF","text-color":"#ffffff","active-text-color":"#ffffff",mode:"horizontal",router:""}},[o("el-menu-item",{attrs:{index:"/"}},[t._v("下单")]),o("el-menu-item",{attrs:{index:"/history"}},[t._v("历史")]),o("el-menu-item",{attrs:{index:"/log"}},[t._v("日志")])],1)],1),o("el-col",{attrs:{span:6}},[o("div",{staticClass:"topBar"},[o("li",[t._v("用户名："+t._s(t.user.username))]),o("li",[o("el-button",{attrs:{size:"mini"},on:{click:t.getComein}},[t._v("退出")])],1)])])],1)],1):t._e(),o("el-main",{staticStyle:{padding:"0",height:"100%"}},[o("transition",{attrs:{name:t.transitionName}},[o("keep-alive",[o("router-view")],1)],1)],1)],1),o("el-dialog",{attrs:{title:"收款记录",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[o("el-table",{attrs:{data:t.info}},[o("el-table-column",{attrs:{property:"name",label:"收款方式"}}),o("el-table-column",{attrs:{property:"money",label:"金额"}})],1),o("p",{staticStyle:{"text-align":"center","margin-top":"20px"}},[o("el-button",{attrs:{type:"primary"},on:{click:t.signout}},[t._v("确认&退出")])],1)],1)],1)},i=[],n=o("5c96"),l=o.n(n),c={name:"app",data:function(){return{appName:this.config.APP_NAME,user:[],info:[],dialogTableVisible:!1,activeIndex:"/",transitionName:""}},watch:{$route:function(t,e){t.meta.index>0?t.meta.index<e.meta.index?this.transitionName="slide-right":this.transitionName="slide-left":0==t.meta.index&&e.meta.index>0&&(this.transitionName="slide-right")}},created:function(){this.user=JSON.parse(this.$store.state.user)},mounted:function(){},methods:{getComein:function(){var t=this,e=n["Loading"].service(),o={token:this.$store.state.token};this.$http.post("/getComein",o).then(function(o){e.close(),o=o.data,1==o.code?(t.info=o.body,t.dialogTableVisible=!0):9001==o.code?t.$alert(o.desc,{type:"error",callback:function(e){t.$store.commit("SIGN_OUT"),t.$router.push({path:"/login"})}}):0==o.code&&t.$alert(o.desc,{type:"error"})})},signout:function(){var t=this;this.dialogTableVisible=!1;var e=n["Loading"].service(),o={token:this.$store.state.token};this.$http.post("/endShouyin",o).then(function(o){e.close(),o=o.data,1==o.code?(t.$store.commit("SIGN_OUT"),t.$router.push({path:"/login"})):9001==o.code?t.$alert(o.desc,{type:"error",callback:function(e){t.$store.commit("SIGN_OUT"),t.$router.push({path:"/login"})}}):0==o.code&&t.$alert(o.desc,{type:"error"})})}}},d=c,u=(o("034f"),o("2877")),p=Object(u["a"])(d,r,i,!1,null,null,null),f=p.exports,h=o("8c4f"),m=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"wrap"},[o("el-container",{staticStyle:{height:"100%"}},[o("el-aside",{attrs:{width:"30%"}},[o("div",{staticClass:"main",staticStyle:{"padding-top":"20px"}},[o("el-input",{attrs:{placeholder:"请输入商品关键词或编号"},model:{value:t.keyword,callback:function(e){t.keyword=e},expression:"keyword"}}),o("el-table",{staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:t.goods},on:{"row-click":t.insertGoods}},[o("el-table-column",{attrs:{prop:"id",label:"编号",width:"50"}}),o("el-table-column",{attrs:{prop:"name",label:"名称"}}),o("el-table-column",{attrs:{prop:"price",label:"价格",width:"80"}}),o("el-table-column",{attrs:{prop:"price1",label:"会员价",width:"80"}}),o("el-table-column",{attrs:{prop:"stock",label:"库存",width:"60"}})],1)],1)]),o("el-container",[o("el-main",[o("div",{staticClass:"bar"},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:6}},[o("el-input",{attrs:{placeholder:"会员账号/手机"},model:{value:t.orderKeyword,callback:function(e){t.orderKeyword=e},expression:"orderKeyword"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchOrder},slot:"append"})],1)],1),o("el-col",{staticStyle:{height:"40px"},attrs:{span:12}},[t.member?o("el-alert",{attrs:{title:"姓名【"+t.member.name+"】身份【"+t.member.group+"】余额【$"+t.member.money+"】",type:"warning"},on:{close:t.clearSearch}}):t._e()],1),o("el-col",{attrs:{span:6}},[o("div",{staticClass:"barAction"},[o("el-button",{attrs:{type:"danger"},on:{click:t.clearCart}},[t._v("清空")])],1)])],1)],1),o("el-dialog",{attrs:{title:"到店支付订单",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[o("el-table",{attrs:{data:t.order}},[o("el-table-column",{attrs:{property:"name",label:"商品"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.goods,function(e){return o("p",[t._v(t._s(e.name))])})}}])}),o("el-table-column",{attrs:{property:"name",label:"数量",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.goods,function(e){return o("p",[t._v(t._s(e.number))])})}}])}),o("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){t.orderSelect(e.row)}}},[t._v("选择")]),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){t.orderDelete(e.row)}}},[t._v("删除")])]}}])})],1)],1),o("el-dialog",{attrs:{title:"付款人",size:"mini",visible:t.dialogUserVisible},on:{"update:visible":function(e){t.dialogUserVisible=e}}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:12}},[o("el-input",{attrs:{placeholder:"姓名/电话"},model:{value:t.userParam.keyword,callback:function(e){t.$set(t.userParam,"keyword",e)},expression:"userParam.keyword"}},[o("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchUser},slot:"append"})],1)],1)],1),o("el-table",{attrs:{data:t.invoiceList}},[o("el-table-column",{attrs:{property:"name",label:"姓名"}}),o("el-table-column",{attrs:{property:"tel",label:"电话"}}),o("el-table-column",{attrs:{property:"company",label:"公司"}}),o("el-table-column",{attrs:{property:"abn",label:"ABN"}}),o("el-table-column",{attrs:{property:"address",label:"地址"}}),o("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){t.selectUser(e.row)}}},[t._v("选择")])]}}])})],1),o("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.userParam.total},on:{"current-change":t.changePage}})],1),o("el-table",{staticStyle:{width:"100%"},attrs:{data:t.cart,border:""}},[o("el-table-column",{attrs:{prop:"name",label:"名称"}}),o("el-table-column",{attrs:{prop:"weight",label:"重量",width:"100"}}),o("el-table-column",{attrs:{label:"价格",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{size:"mini"},on:{blur:function(o){t.changePrice(e.row)}},model:{value:e.row.price,callback:function(o){t.$set(e.row,"price",o)},expression:"scope.row.price"}})]}}])}),o("el-table-column",{attrs:{label:"会员价",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input",{attrs:{size:"mini"},on:{blur:function(o){t.changePrice(e.row)}},model:{value:e.row.price1,callback:function(o){t.$set(e.row,"price1",o)},expression:"scope.row.price1"}})]}}])}),o("el-table-column",{attrs:{prop:"danjia",label:"带走价",width:"100"}}),o("el-table-column",{attrs:{prop:"money",label:"小计",width:"100"}}),o("el-table-column",{attrs:{label:"商品数量",width:"150"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-input-number",{attrs:{size:"mini",min:1},on:{blur:function(o){t.changeNumber(e.row)},change:function(o){t.changeNumber(e.row)}},model:{value:e.row.number,callback:function(o){t.$set(e.row,"number",o)},expression:"scope.row.number"}})]}}])}),o("el-table-column",{attrs:{label:"操作",width:"50"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){t.delGoods(e.$index)}}},[t._v("删除")])]}}])})],1),o("el-card",{staticClass:"box-card",staticStyle:{"margin-top":"15px"}},[o("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[o("span",[t._v("支付方式")])]),t._l(t.pay_opt,function(e){return o("el-radio",{key:e.id,attrs:{disabled:e.checked,label:e.name},on:{change:t.getTotalPrice},model:{value:t.payType,callback:function(e){t.payType=e},expression:"payType"}},[t._v(t._s(e.name))])})],2)],1),o("el-footer",{attrs:{height:"100px"}},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:6}},[o("div",{staticClass:"moneyBox"},[o("li",[o("label",[t._v("应收金额")]),o("span",{staticClass:"money"},[t._v(t._s(t.total))])]),o("li",[o("label",[t._v("商品金额")]),o("span",[t._v(t._s(t.goodsMoney))])]),o("li",[o("label",[t._v("邮费")]),o("span",[t._v(t._s(t.yunfei))])])])]),o("el-col",{attrs:{span:10}},[o("div",{staticClass:"action",staticStyle:{"margin-top":"40px"}},[o("li",[t._v("\n                                会员价\n                                "),o("el-switch",{attrs:{"on-value":"1","off-value":"0"},on:{change:t.setVip},model:{value:t.vip,callback:function(e){t.vip=e},expression:"vip"}})],1),o("li",[t._v("\n\t\t\t\t\t\t\t\t带走\n                                "),o("el-switch",{attrs:{"on-value":"1","off-value":"0"},on:{change:t.setDai},model:{value:t.dai,callback:function(e){t.dai=e},expression:"dai"}})],1),o("li",[o("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"请选择仓库",size:"mini"},model:{value:t.stock,callback:function(e){t.stock=e},expression:"stock"}},t._l(t.stockOpt,function(t){return o("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1),o("li",[o("el-button",{attrs:{size:"mini"},on:{click:t.selectInvoiced}},[t._v(t._s(t._f("empty")(t.invoiced.name,"选择付款人")))])],1)])]),o("el-col",{attrs:{span:8}},[o("div",{staticClass:"action"},[o("el-button",{attrs:{plain:"",type:"primary",disabled:t.isDisabled},on:{click:t.printSmall}},[t._v("打印小票")]),o("el-button",{attrs:{plain:"",type:"primary",disabled:t.isDisabled},on:{click:t.printA4}},[t._v("打印A4")]),o("el-button",{attrs:{type:"primary",disabled:t.isDisabled},on:{click:t.doSubmit}},[t._v("保存")])],1)])],1)],1)],1)],1)],1)},b=[],v=o("bd86"),y=o("f499"),g=o.n(y),_=(o("7f7f"),{data:function(){return{user:{},keyword:"",orderKeyword:"",allGoods:[],goods:[],cart:[],order:[],total:0,goodsMoney:0,yunfei:0,dai:!1,vip:!1,dialogTableVisible:!1,dialogUserVisible:!1,isDisabled:!0,payType:"",pay_opt:[],invoiced:[],invoiceList:[],userParam:{page:1,keyword:"",total:0},stock:"shop",member:"",stockOpt:[{value:"shop",label:"店铺仓库"},{value:"web",label:"网站仓库"}]}},watch:{keyword:function(t,e){""!=t?this.searchGoods(t):this.goods=[]},$route:function(t,e){this.$store.state.flag&&(this.cart=this.$store.state.cart,this.getTotalPrice(),this.$store.commit("CLEAR_CART"))}},created:function(){this.init()},methods:(a={init:function(){this.user=JSON.parse(this.$store.state.user),this.getAllInfo();var t=this.$route.query.orderID;""!=t&&void 0!=t&&(this.orderID=t,this.createOrder(t))},getAllInfo:function(){var t=this;if(""==this.$store.state.token||void 0==this.$store.state.token)return!1;var e=n["Loading"].service(),o={token:this.$store.state.token};this.$http.post("/getAllInfo",o).then(function(o){e.close(),o=o.data,1==o.code?(t.allGoods=o.body.goods,t.pay_opt=o.body.payType):9001==o.code?t.$alert(o.desc,{type:"error",callback:function(e){t.$store.commit("SIGN_OUT"),t.$router.push({path:"/login"})}}):0==o.code&&t.$alert(o.desc,{type:"error"})})},searchGoods:function(t){for(var e=this,o=[],a=0;a<e.allGoods.length;a++){t=t.toLowerCase();var s=e.allGoods[a]["name"].toLowerCase();t!=e.allGoods[a]["id"]&&-1==s.indexOf(t)&&-1==e.allGoods[a]["keyword"].indexOf(t)||o.push(e.allGoods[a])}e.goods=o},insertGoods:function(t){var e=this,o={};o.id=t.id,o.name=t.name,o.goodsID=t.goodsID,o.stock=t.stock,o.goodsNumber=t.goodsNumber,o.short=t.short,o.wuliuWeight=t.wuliuWeight,o.price=t.price,o.price1=t.price1,o.gst=t.gst,o.number=t.number,o.money=t.money,o.itemType=t.itemType,e.cart.push(o),e.getTotalPrice()},delGoods:function(t){var e=this,o=[];for(var a in e.cart)a!=t&&o.push(e.cart[a]);e.cart=o,this.getTotalPrice()},selectInvoiced:function(t){for(var e in this.invoiced_opt)this.invoiced_opt[e]["id"]!=t.id&&(this.invoiced=this.invoiced_opt[e],this.$store.commit("SET_INVOICED",this.invoiced))},changeWeight:function(){this.getTotalPrice()},changeNumber:function(t){this.getTotalPrice()},changePrice:function(t){this.getTotalPrice()},setVip:function(t){this.vip=!!t,this.getTotalPrice()},setDai:function(t){this.dai=!!t,this.getTotalPrice()},getTotalPrice:function(){var t=this,e=0,o=0,a=0,s=0,r=0,i=0;for(var n in t.cart)t.cart[n]["weight"]=(t.cart[n]["wuliuWeight"]*t.cart[n]["number"]).toFixed(2),s=1==this.vip?t.cart[n]["price1"]:t.cart[n]["price"],1==this.dai&&1==t.cart[n]["gst"]&&(s=(1.1*s).toFixed(2)),t.cart[n]["danjia"]=s,r=s*t.cart[n]["number"],t.cart[n]["money"]=r.toFixed(2),2==t.cart[n]["itemType"]?o+=r:e+=r,1==t.cart[n]["gst"]&&(i+=t.cart[n]["danjia"]-t.cart[n]["danjia"]/1.1);a=e+o,t.gst=i.toFixed(2),t.yunfei=o.toFixed(2),t.goodsMoney=e.toFixed(2),t.total=a.toFixed(2),t.danjia=s,t.cart.length>0?t.isDisabled=!1:t.isDisabled=!0;var l={goods:t.cart,vip:t.vip,payType:t.payType,total:t.total,yunfei:t.yunfei,goodsMoney:t.goodsMoney,gst:t.gst};this.$store.commit("SET_ORDER",l)},clearCart:function(){var t=this;this.$confirm("确定要这样做吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.cart=[],t.total=0,t.member="",t.invoiced=[],t.order=[],t.orderKeyword="",t.getTotalPrice()})},printSmall:function(){if(""==this.payType)return this.$alert("请选择收款方式",{type:"error"}),!1;this.$router.push({path:"/xiaopiao"})},printA4:function(){return""==this.payType?(this.$alert("请选择收款方式",{type:"error"}),!1):""==this.$store.state.order.No||void 0==this.$store.state.order.No?(this.$alert("请先打印小票",{type:"error"}),!1):void this.$router.push({path:"/dapiao"})},doSubmit:function(){var t=this;if(""==this.payType)return this.$alert("请选择收款方式",{type:"error"}),!1;if(""==this.$store.state.order.No||void 0==this.$store.state.order.No)return this.$alert("请先打印小票",{type:"error"}),!1;var e=n["Loading"].service({text:"数据提交中..."}),o=this.$store.state.order;o.token=this.$store.state.token,o.stock=this.stock,this.member?o.member=this.member:o.member="",o.No=this.$store.state.order.No,o=g()(o),this.$http.post("/submit",{data:o}).then(function(o){e.close(),o=o.data,1==o.code?t.$alert(o.desc,{type:"success",callback:function(t){window.location.reload()}}):9001==o.code?t.$alert(o.desc,{type:"error",callback:function(e){t.$store.commit("SIGN_OUT"),t.$router.push({path:"/login"})}}):0==o.code&&t.$alert(o.desc,{type:"error"})})},searchOrder:function(){var t=this;if(""==this.$store.state.token||void 0==this.$store.state.token||""==this.orderKeyword)return!1;var e=n["Loading"].service(),o={token:this.$store.state.token,keyword:this.orderKeyword};this.$http.post("/searchOrder",o).then(function(o){e.close(),o=o.data,1==o.code?(o.body.order.length>0?(t.dialogTableVisible=!0,t.order=o.body.order):(t.dialogTableVisible=!1,t.order=""),t.member=o.body.user,"会员用户"==t.member.group?t.vip=!0:t.vip=!1,t.member.money>0?t.pay_opt[4]["checked"]=!1:t.pay_opt[4]["checked"]=!0,t.getTotalPrice()):9001==o.code?t.$alert(o.desc,{type:"error",callback:function(e){t.$store.commit("SIGN_OUT"),t.$router.push({path:"/login"})}}):0==o.code&&t.$alert(o.desc,{type:"error"})})},clearSearch:function(){this.member="",this.order=[],this.orderKeyword="",this.vip=!1,this.pay_opt[4]["checked"]=!0,this.getTotalPrice()},orderDelete:function(t){var e=this,o=[];for(var a in e.order)e.order[a]["id"]!=t.id&&o.push(e.order[a]);e.order=o},orderSelect:function(t){var e=this;this.cart=t.goods,e.order=[],this.dialogTableVisible=!1,this.getTotalPrice()}},Object(v["a"])(a,"selectInvoiced",function(){this.dialogUserVisible=!0,this.page=1,this.getInvoicedUser()}),Object(v["a"])(a,"searchUser",function(){this.page=1,this.getInvoicedUser()}),Object(v["a"])(a,"selectUser",function(t){this.invoiced=t,this.dialogUserVisible=!1,this.$store.commit("SET_INVOICED",t)}),Object(v["a"])(a,"changePage",function(t){this.page=t,this.getInvoicedUser()}),Object(v["a"])(a,"getInvoicedUser",function(){var t=this;if(""==this.$store.state.token||void 0==this.$store.state.token)return!1;var e=n["Loading"].service(),o={token:this.$store.state.token,keyword:this.userParam.keyword,page:this.userParam.page};this.$http.post("/invoice",o).then(function(o){e.close(),o=o.data,1==o.code?(t.invoiceList=o.body.invoice,t.userParam.total=o.body.total):9001==o.code?t.$alert(o.desc,{type:"error",callback:function(e){t.$store.commit("SIGN_OUT"),t.$router.push({path:"/login"})}}):0==o.code&&t.$alert(o.desc,{type:"error"})})}),a)}),k=_,j=(o("f0d2"),Object(u["a"])(k,m,b,!1,null,"fc766f60",null)),$=j.exports,w=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"loginBox"},[o("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm login-container",attrs:{model:t.ruleForm,rules:t.rules,"label-position":"left","label-width":"0px"}},[o("h3",{staticClass:"title"},[t._v(t._s(t.appName))]),o("el-form-item",{attrs:{prop:"account"}},[o("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},model:{value:t.ruleForm.account,callback:function(e){t.$set(t.ruleForm,"account",e)},expression:"ruleForm.account"}})],1),o("el-form-item",{attrs:{prop:"checkPass"}},[o("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:t.ruleForm.checkPass,callback:function(e){t.$set(t.ruleForm,"checkPass",e)},expression:"ruleForm.checkPass"}})],1),o("el-form-item",{staticStyle:{width:"100%"}},[o("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",loading:t.logining},nativeOn:{click:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[t._v("登录")])],1)],1)],1)},x=[],S={name:"login",data:function(){return{appName:this.config.APP_NAME,logining:!1,ruleForm:{account:"",checkPass:""},rules:{account:[{required:!0,message:"请输入账号",trigger:"blur"}],checkPass:[{required:!0,message:"请输入密码",trigger:"blur"}]},checked:!0}},created:function(){},methods:{handleSubmit:function(t){var e=this;this.$refs.ruleForm.validate(function(t){if(!t)return!1;e.logining=!0;var o={username:e.ruleForm.account,password:e.ruleForm.checkPass};e.$http.post("/login",o).then(function(t){e.logining=!1,t=t.data,1==t.code?(e.ruleForm.account="",e.ruleForm.checkPass="",e.$store.commit("SET_TOKEN",t.body.token),e.$store.commit("SET_USER",g()(t.body.userinfo)),window.location.href="/shouyin"):e.$message({message:t.desc,type:"error"})})})}}},T=S,C=(o("8cde"),Object(u["a"])(T,w,x,!1,null,"21abde48",null)),O=C.exports,I=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"box"},[o("div",{staticClass:"title"},[t._v("Picking List")]),o("p",[t._v("备注小票号："+t._s(t.info.No))]),o("p",[t._v(t._s(t._f("dateFormat")(t.info.time,"YYYY-MM-DD HH:mm:ss")))]),o("div",{staticClass:"line"}),t._m(0),t._l(t.info.goods,function(e){return o("div",{staticClass:"list"},[o("li",{staticClass:"col1"},[t._v(t._s(e.short))]),o("li",{staticClass:"col2"},[t._v("$"+t._s(e.danjia))]),o("li",{staticClass:"col3"},[t._v(t._s(e.number))]),o("li",{staticClass:"col4"},[t._v("$"+t._s(e.money))])])}),o("div",{staticClass:"line"}),o("div",{staticClass:"total"},[o("div",{staticClass:"user"},[t._v("casher : "+t._s(t.user.username))]),o("div",{staticClass:"money"},[t._v("$"+t._s(t.info.total))])])],2)},N=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"list"},[o("li",{staticClass:"col1"},[t._v("名称")]),o("li",{staticClass:"col2"},[t._v("价格")]),o("li",{staticClass:"col3"},[t._v("数量")]),o("li",{staticClass:"col4"},[t._v("总计")])])}],P={data:function(){return{user:{},info:{}}},watch:{$route:function(t,e){"/xiaopiao"==t.path&&this.getOrderInfo()}},created:function(){this.user=JSON.parse(this.$store.state.user),this.getOrderInfo()},methods:{getOrderInfo:function(){var t=this,e=n["Loading"].service(),o={token:this.$store.state.token};this.$http.post("/getXiaopiaoNo",o).then(function(o){if(e.close(),o=o.data,1==o.code){var a=o.body.No;t.info=t.$store.state.order,t.info.No=a,t.info.time=new Date,t.$store.commit("SET_ORDER_NO",a)}else 9001==o.code?t.$alert(o.desc,{type:"error",callback:function(e){t.$store.commit("SIGN_OUT"),t.$router.push({path:"/login"})}}):0==o.code&&t.$alert(o.desc,{type:"error"})})}}},E=P,z=(o("c582"),Object(u["a"])(E,I,N,!1,null,"2f450326",null)),D=z.exports,U=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("table",{staticClass:"myTable"},[o("tr",[t._m(0),o("td",[o("div",{staticClass:"company text-right"},[t._v("TAX INVOICE")]),o("div",{staticClass:"info text-right"},[t._v("Invoice No: "+t._s(t.info.No))]),o("div",{staticClass:"info text-right"},[t._v(t._s(t._f("dateFormat")(t.info.time,"DD/MM/YYYY")))])])]),o("tr",[o("td",{staticStyle:{width:"50%"}},[t._v("Invoiced To")]),o("td",[t._v("Payment Amount:$"+t._s(t.info.total))])]),o("tr",[o("td",{staticStyle:{width:"50%"}},[o("el-input",{attrs:{type:"textarea",rows:5},model:{value:t.kaipiao,callback:function(e){t.kaipiao=e},expression:"kaipiao"}})],1),t._m(1)]),o("tr",[o("td",{attrs:{colspan:"2"}},[t._m(2),t._l(t.info.goods,function(e,a){return o("div",{staticClass:"list"},[o("li",{staticClass:"col1"},[t._v(t._s(a+1))]),o("li",{staticClass:"col2"},[t._v(t._s(e.name))]),o("li",{staticClass:"col3"},[t._v(t._s(e.number))]),o("li",{staticClass:"col4"},[t._v("$"+t._s(e.danjia))]),1==e.gst?o("li",{staticClass:"col5"},[t._v("GST")]):o("li",{staticClass:"col5"},[t._v("FRE")]),o("li",{staticClass:"col6"},[t._v("$"+t._s(e.money))])])}),o("div",{staticClass:"line",staticStyle:{"margin-top":"50px"}}),o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:6}},[t._v("\n\t\t\t\t\t\tPayment Method"),o("br"),t._v(t._s(t.info.payType)+"\n\t\t\t\t\t")]),o("el-col",{attrs:{span:6}},[t._v("$"+t._s(t.info.total))]),o("el-col",{attrs:{span:12}},[o("p",{staticStyle:{"text-align":"right"}},[t._v("Sub Total:$"+t._s(t.info.total))]),o("p",{staticStyle:{"text-align":"right"}},[t._v("Total Amount Including GST:$"+t._s(t.info.gst))]),o("p",{staticStyle:{"text-align":"right"}},[t._v("GST Included:$"+t._s(t.info.gst))])])],1)],2)])])},G=[function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("td",{staticStyle:{width:"50%"}},[o("div",{staticClass:"company"},[t._v("Train Exporting Pty Ltd")]),o("div",{staticClass:"info"},[t._v("Unit 1 140 Ashley St Underdale SA 5032")]),o("div",{staticClass:"info"},[t._v("ABN:71 623 342 432")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("td",[o("p",[t._v("Commonwealth Bank")]),o("p",[t._v("Name: Train Exporting")]),o("p",[t._v("BSB: 065 000")]),o("p",[t._v("Account Number: 12334607")])])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"list"},[o("li",{staticClass:"col1"},[t._v("No.")]),o("li",{staticClass:"col2"},[t._v("Description")]),o("li",{staticClass:"col3"},[t._v("Qty")]),o("li",{staticClass:"col4"},[t._v("Price")]),o("li",{staticClass:"col5"},[t._v("Tax")]),o("li",{staticClass:"col6"},[t._v("Extension")])])}],F={name:"dapiao",data:function(){return{info:{},invoiced:[],kaipiao:""}},watch:{$route:function(t,e){"/dapiao"==t.path&&this.getOrderInfo()}},created:function(){this.getOrderInfo()},methods:{getOrderInfo:function(){this.info=this.$store.state.order;var t=this.info.goods,e=0;for(var o in t)1==t[o]["gst"]&&(e+=t[o]["number"]*(t[o]["danjia"]-t[o]["danjia"]/1.1));this.info.gst=e.toFixed(2),this.invoiced=this.$store.state.invoiced;var a="";""!=this.invoiced.name&&void 0!=this.invoiced.name&&(a+=this.invoiced.name+"\n"),""!=this.invoiced.tel&&void 0!=this.invoiced.tel&&(a+=this.invoiced.tel+"\n"),""!=this.invoiced.company&&void 0!=this.invoiced.company&&(a+=this.invoiced.company+"\n"),""!=this.invoiced.abn&&void 0!=this.invoiced.abn&&(a+=this.invoiced.abn+"\n"),""!=this.invoiced.address&&void 0!=this.invoiced.address&&(a+=this.invoiced.address+"\n"),this.kaipiao=a}}},A=F,V=(o("9274"),Object(u["a"])(A,U,G,!1,null,"046ca4ac",null)),L=V.exports,M=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"wrap"},[o("el-table",{attrs:{data:t.order,border:""}},[o("el-table-column",{attrs:{property:"order_no",label:"订单号",width:"200"}}),o("el-table-column",{attrs:{property:"No",label:"小票号",width:"100"}}),o("el-table-column",{attrs:{property:"name",label:"商品"},scopedSlots:t._u([{key:"default",fn:function(e){return t._l(e.row.goods,function(e){return o("p",{staticStyle:{"font-size":"12px"}},[t._v(t._s(e.name)+" * "+t._s(e.number))])})}}])}),o("el-table-column",{attrs:{property:"memberID",label:"会员账号",width:"100"}}),o("el-table-column",{attrs:{property:"name",label:"姓名",width:"100"}}),o("el-table-column",{attrs:{property:"mobile",label:"手机号",width:"150"}}),o("el-table-column",{attrs:{property:"payType",label:"支付方式",width:"100"}}),o("el-table-column",{attrs:{property:"total",label:"总金额",width:"100"}}),o("el-table-column",{attrs:{label:"操作",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){t.orderSelect(e.row)}}},[t._v("修改")]),o("el-button",{attrs:{type:"text",size:"small"},on:{click:function(o){t.orderDelete(e.row)}}},[t._v("删除")])]}}])})],1)],1)},R=[],B={data:function(){return{user:[],order:[]}},watch:{$route:function(t,e){"/history"==t.path&&(this.init(),this.getInfo())}},created:function(){this.init(),this.getInfo()},methods:{init:function(){this.user=JSON.parse(this.$store.state.user)},getInfo:function(){var t=this;if(""==this.$store.state.token||void 0==this.$store.state.token)return!1;var e=n["Loading"].service(),o={token:this.$store.state.token};this.$http.post("/history",o).then(function(o){e.close(),o=o.data,1==o.code?t.order=o.body.order:9001==o.code?t.$alert(o.desc,{type:"error",callback:function(e){t.$store.commit("SIGN_OUT"),t.$router.push({path:"/login"})}}):0==o.code&&t.$alert(o.desc,{type:"error"})})},orderSelect:function(t){var e=this,o={token:this.$store.state.token,id:t.id};this.$http.post("/delOrder",o).then(function(o){if(o=o.data,1==o.code){for(var a=[],s=0;s<t.goods.length;s++)a.push(t.goods[s]);e.$store.commit("SET_CART",a),e.$router.push({path:"/"})}else 9001==o.code?e.$alert(o.desc,{type:"error",callback:function(t){e.$store.commit("SIGN_OUT"),e.$router.push({path:"/login"})}}):0==o.code&&e.$alert(o.desc,{type:"error"})})},orderDelete:function(t){var e=this,o=this;this.$confirm("确定要这样做吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(""==e.$store.state.token||void 0==e.$store.state.token)return!1;var a=n["Loading"].service(),s={token:e.$store.state.token,id:t.id};e.$http.post("/delOrder",s).then(function(t){a.close(),t=t.data,1==t.code||(9001==t.code?e.$alert(t.desc,{type:"error",callback:function(t){e.$store.commit("SIGN_OUT"),e.$router.push({path:"/login"})}}):0==t.code&&e.$alert(t.desc,{type:"error"}))});var r=[];for(var i in o.order)o.order[i]["id"]!=t.id&&r.push(o.order[i]);o.order=r})}}},K=B,Y=(o("abca"),Object(u["a"])(K,M,R,!1,null,"44672b9d",null)),J=Y.exports,q=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"wrap"},[o("div",{staticClass:"block",staticStyle:{"margin-bottom":"10px"}},[o("el-date-picker",{attrs:{type:"daterange","range-separator":"至","value-format":"yyyy-MM-dd","start-placeholder":"开始日期","end-placeholder":"结束日期"},on:{change:t.selectDate},model:{value:t.dateStr,callback:function(e){t.dateStr=e},expression:"dateStr"}})],1),o("el-table",{attrs:{data:t.info,border:""}},[o("el-table-column",{attrs:{property:"date",label:"日期",width:"200"}}),o("el-table-column",{attrs:{property:"type.pay1",label:"OMI支付"}}),o("el-table-column",{attrs:{property:"type.pay2",label:"现金支付"}}),o("el-table-column",{attrs:{property:"type.pay3",label:"银行刷卡"}}),o("el-table-column",{attrs:{property:"type.pay4",label:"银行转账"}}),o("el-table-column",{attrs:{property:"type.pay5",label:"余额支付"}}),o("el-table-column",{attrs:{property:"total",label:"合计"}})],1)],1)},W=[],H={data:function(){return{dateStr:"",user:[],info:[],start:"",end:""}},watch:{$route:function(t,e){"/log"==t.path&&(this.init(),this.getInfo())}},created:function(){this.init(),this.getInfo()},methods:{init:function(){this.user=JSON.parse(this.$store.state.user)},selectDate:function(t){this.start=t[0],this.end=t[1],this.getInfo()},getInfo:function(){var t=this;if(""==this.$store.state.token||void 0==this.$store.state.token)return!1;var e=n["Loading"].service(),o={token:this.$store.state.token,start:this.start,end:this.end};this.$http.post("/log",o).then(function(o){e.close(),o=o.data,1==o.code?t.info=o.body:9001==o.code?t.$alert(o.desc,{type:"error",callback:function(e){t.$store.commit("SIGN_OUT"),t.$router.push({path:"/login"})}}):0==o.code&&t.$alert(o.desc,{type:"error"})})}}},X=H,Q=(o("c655"),Object(u["a"])(X,q,W,!1,null,"55ab2023",null)),Z=Q.exports;s["default"].use(h["a"]);var tt=new h["a"]({mode:"history",base:"/shouyin/",routes:[{path:"/",name:"home",meta:{index:0,top:!0},component:$},{path:"/login",name:"login",meta:{index:1,top:!1},component:O},{path:"/xiaopiao",name:"xiaopiao",meta:{index:1,top:!1},component:D},{path:"/dapiao",name:"dapiao",meta:{index:1,top:!1},component:L},{path:"/history",name:"history",meta:{index:1,top:!0},component:J},{path:"/log",name:"log",meta:{index:2,top:!0},component:Z}]}),et=o("2f62");s["default"].use(et["a"]);var ot=new et["a"].Store({state:{token:window.sessionStorage.getItem("token"),user:window.sessionStorage.getItem("userinfo"),order:{},invoiced:{},flag:!1,cart:[]},mutations:{SET_TOKEN:function(t,e){t.token=e,window.sessionStorage.setItem("token",e)},SET_USER:function(t,e){t.user=e,window.sessionStorage.setItem("userinfo",e)},SIGN_OUT:function(t){t.token="",t.user=[],window.sessionStorage.removeItem("token"),window.sessionStorage.removeItem("userinfo")},SET_ORDER:function(t,e){t.order=e},SET_ORDER_NO:function(t,e){t.order.No=e},SET_INVOICED:function(t,e){t.invoiced=e},SET_CART:function(t,e){t.cart=e,t.flag=!0},CLEAR_CART:function(t){t.cart=[],t.flag=!1}},actions:{}}),at={APP_NAME:"AGS收银台"},st=at,rt=o("bc3a"),it=o.n(rt),nt="https://www.myags.com.au/www/api",lt=nt;it.a.defaults.timeout=1e4,it.a.defaults.baseURL=lt,it.a.defaults.transformRequest=function(t){var e="";for(var o in t)e+=encodeURIComponent(o)+"="+encodeURIComponent(t[o])+"&";return e};var ct=it.a,dt=o("c1df"),ut=o.n(dt);o("0fae");s["default"].use(l.a),s["default"].config.productionTip=!1,s["default"].prototype.config=st,s["default"].prototype.$http=ct,tt.beforeEach(function(t,e,o){var a=ot.state.token?ot.state.token:window.sessionStorage.getItem("token");a?o():"/login"==t.path?o():o("login")}),s["default"].filter("dateFormat",function(t,e){return ut()(t).format(e)}),s["default"].filter("empty",function(t,e){return""==t||void 0==t?e:t}),new s["default"]({data:{},router:tt,store:ot,render:function(t){return t(f)}}).$mount("#app")},"64a9":function(t,e,o){},"6a61":function(t,e,o){},"8cde":function(t,e,o){"use strict";var a=o("ae02"),s=o.n(a);s.a},9274:function(t,e,o){"use strict";var a=o("1153"),s=o.n(a);s.a},abca:function(t,e,o){"use strict";var a=o("4cca"),s=o.n(a);s.a},ae02:function(t,e,o){},c582:function(t,e,o){"use strict";var a=o("388d"),s=o.n(a);s.a},c655:function(t,e,o){"use strict";var a=o("6a61"),s=o.n(a);s.a},f0d2:function(t,e,o){"use strict";var a=o("319a"),s=o.n(a);s.a}});